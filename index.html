<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>UBG - Juegos</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800;900&display=swap" rel="stylesheet">
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Montserrat', sans-serif;
      background: #000;
      color: #fff;
      overflow: hidden;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 30px 20px;
    }

    canvas#particles { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }

    .clock {
      position: absolute;
      top: 20px;
      left: 25px;
      font-size: 2.2rem;
      font-weight: 900;
      letter-spacing: 3px;
      z-index: 20;
      color: #fff;
    }

    h1 {
      font-size: 11vw;
      font-weight: 900;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      background: linear-gradient(90deg, #fff, #ccc, #fff);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: shine 4s ease-in-out infinite;
      text-shadow: 0 0 30px rgba(255,255,255,0.5);
      z-index: 10;
      cursor: pointer;
      transition: all 0.4s ease;
      user-select: none;
    }

    h1:hover { transform: scale(1.12); text-shadow: 0 0 60px rgba(255,255,255,0.9); }

    @keyframes shine { 0%,100%{background-position:0% 50%} 50%{background-position:100% 50%} }

    /* Grilla principal + tarjeta central abajo */
    .main-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 30px;
      width: 100%;
      max-width: 1400px;
      margin-top: 50px;
      z-index: 10;
    }

    .add-card {
      grid-column: 1 / -1;
      justify-self: center;
      width: 340px;
      background: rgba(255,255,255,0.08);
      border: 2px dashed rgba(255,255,255,0.3);
      color: #aaa;
      font-size: 1.4rem;
      font-weight: 600;
    }

    .card {
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 20px;
      padding: 40px 30px;
      text-align: center;
      cursor: pointer;
      transition: all 0.35s ease;
      backdrop-filter: blur(8px);
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .card:hover, .add-card:hover {
      background: rgba(255,255,255,0.18);
      transform: translateY(-8px);
      box-shadow: 0 15px 40px rgba(255,255,255,0.1);
    }

    .card h3 { font-size: 1.8rem; font-weight: 700; margin-bottom: 15px; }
    .card p { font-size: 1.1rem; opacity: 0.8; }

    /* Modal añadir página - animación POP */
    #addModal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.92);
      z-index: 200;
      align-items: center;
      justify-content: center;
    }

    .pop-box {
      background: #111;
      padding: 40px;
      border-radius: 20px;
      border: 2px solid #333;
      width: 90%;
      max-width: 420px;
      text-align: center;
      animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      transform-origin: center;
    }

    @keyframes pop {
      0% { transform: scale(0.3); opacity: 0; }
      70% { transform: scale(1.1); }
      100% { transform: scale(1); opacity: 1; }
    }

    .pop-box input {
      width: 100%;
      padding: 14px;
      margin: 12px 0;
      background: #222;
      border: none;
      border-radius: 10px;
      color: white;
      font-family: 'Montserrat', sans-serif;
      font-size: 1rem;
    }

    .pop-box button {
      margin-top: 20px;
      padding: 12px 30px;
      background: #00ff88;
      color: black;
      border: none;
      border-radius: 30px;
      font-weight: 700;
      cursor: pointer;
      transition: 0.3s;
    }

    .pop-box button:hover { background: #00cc70; transform: scale(1.05); }

    @media (max-width: 768px) {
      .clock { font-size: 1.8rem; top: 15px; left: 15px; }
      h1 { font-size: 16vw; }
      .main-grid { grid-template-columns: 1fr; }
      .add-card { width: 80%; }
    }
  </style>
</head>
<body>

  <canvas id="particles"></canvas>

  <div class="clock" id="clock">00:00</div>

  <h1 onclick="location.reload()">UBG</h1>

  <!-- Grilla de juegos -->
  <div class="main-grid" id="gamesContainer">
    <!-- Las 4 fijas -->
    <div class="card" onclick="openModal('https://pizzaedition.win/', 'The Pizza Edition')">
      <h3>The Pizza Edition</h3>
      <p>Más de 250 juegos gratis</p>
    </div>
    <div class="card" onclick="openModal('https://www.msn.com/en-us/play', 'MSN Games')">
      <h3>MSN Games</h3>
      <p>Juegos arcade y clásicos</p>
    </div>
    <div class="card" onclick="openModal('https://faf-games.github.io/', 'FAF Games')">
      <h3>FAF Games</h3>
      <p>Juegos no bloqueados variados</p>
    </div>
    <div class="card" onclick="openModal('https://www.elimpostorx.com/', 'El Impostor')">
      <h3>El Impostor</h3>
      <p>Juego multijugador de traición</p>
    </div>

    <!-- Tarjeta + Añadir -->
    <div class="add-card" onclick="document.getElementById('addModal').style.display='flex'">
      + Añadir página
    </div>
  </div>

  <!-- Modal juego grande (sin cambios) -->
  <div id="gameModal" class="modal">
    <div class="modal-content">
      <div class="modal-controls">
        <div class="btn-close" onclick="closeModal()">Cerrar</div>
        <div class="btn-fullscreen" onclick="toggleFullscreen()">Pantalla Completa</div>
      </div>
      <iframe id="gameIframe" src="" allowfullscreen></iframe>
    </div>
  </div>

  <!-- Modal añadir página con animación POP -->
  <div id="addModal">
    <div class="pop-box">
      <h2 style="margin-bottom:20px; color:#00ff88">+ Añadir página</h2>
      <input type="url" id="newUrl" placeholder="Insertar URL" required>
      <input type="text" id="newName" placeholder="Insertar nombre" required>
      <button onclick="addNewGame()">Añadir</button>
    </div>
  </div>

  <script>
    // Reloj 24h solo hora:minutos
    function updateClock() {
      const now = new Date();
      const h = String(now.getHours()).padStart(2,'0');
      const m = String(now.getMinutes()).padStart(2,'0');
      document.getElementById('clock').textContent = `${h}:${m}`;
    }
    updateClock();
    setInterval(updateClock, 1000);

    // Cargar juegos guardados
    const savedGames = JSON.parse(localStorage.getItem('ubg_custom_games') || '[]');
    const container = document.getElementById('gamesContainer');

    savedGames.forEach(game => createCard(game.url, game.name));

    function createCard(url, name) {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `<h3>${name}</h3><p>Juego personalizado</p>`;
      card.onclick = () => openModal(url, name);
      container.insertBefore(card, container.lastElementChild); // antes del + Añadir
    }

    // Añadir nuevo juego
    function addNewGame() {
      const url = document.getElementById('newUrl').value.trim();
      const name = document.getElementById('newName').value.trim();
      if (!url || !name) return alert('¡Rellena ambos campos!');
      if (!url.startsWith('http')) return alert('URL no válida');

      createCard(url, name);
      savedGames.push({url, name});
      localStorage.setItem('ubg_custom_games', JSON.stringify(savedGames));

      // Cerrar modal
      document.getElementById('addModal').style.display = 'none';
      document.getElementById('newUrl').value = '';
      document.getElementById('newName').value = '';
    }

    // Cerrar modal añadir con ESC o clic fuera
    document.getElementById('addModal').addEventListener('click', e => {
      if (e.target === document.getElementById('addModal')) 
        document.getElementById('addModal').style.display = 'none';
    });

    // Partículas + modal juego (sin cambios)
    const canvas = document.getElementById('particles');
    const ctx = canvas.getContext('2d');
    canvas.width = innerWidth; canvas.height = innerHeight;
    window.addEventListener('resize',()=> {canvas.width=innerWidth; canvas.height=innerHeight;});

    const particlesArray = []; const numberOfParticles = 130;
    class Particle {
      constructor(){ this.x=Math.random()*canvas.width; this.y=Math.random()*canvas.height;
        this.size=Math.random()*3.5+1; this.speedY=Math.random()*1.3+0.4; this.speedX=Math.random()*0.6-0.3; }
      update(){ this.x+=this.speedX; this.y+=this.speedY;
        if(this.y>canvas.height){this.y=-10; this.x=Math.random()*canvas.width;} }
      draw(){ ctx.fillStyle='rgba(255,255,255,0.85)'; ctx.beginPath();
        ctx.arc(this.x,this.y,this.size,0,Math.PI*2); ctx.fill(); }
    }
    for(let i=0;i<numberOfParticles;i++) particlesArray.push(new Particle());
    function animate(){ ctx.clearRect(0,0,canvas.width,canvas.height);
      particlesArray.forEach(p=>{p.update();p.draw();}); requestAnimationFrame(animate); }
    animate();

    function openModal(url) {
      document.getElementById('gameIframe').src = url;
      document.getElementById('gameModal').style.display = 'block';
      document.body.style.overflow = 'hidden';
    }
    function closeModal() {
      document.getElementById('gameModal').style.display = 'none';
      document.getElementById('gameIframe').src = '';
      document.body.style.overflow = '';
    }
    function toggleFullscreen() {
      const iframe = document.getElementById('gameIframe');
      if (iframe.requestFullscreen) iframe.requestFullscreen();
      else if (iframe.webkitRequestFullscreen) iframe.webkitRequestFullscreen();
      else if (iframe.msRequestFullscreen) iframe.msRequestFullscreen();
    }

    document.addEventListener('keydown', e=>{ if(e.key==='Escape') closeModal(); });
  </script>
</body>
</html>
